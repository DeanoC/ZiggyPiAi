name: ci

on:
  push:
  pull_request:

jobs:
  zig-tests:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: mlugg/setup-zig@v1
      - name: Run Unit Test Suite
        run: zig build test
      - name: Run Targeted Integration Tests
        run: |
          zig test src/integration_test.zig --test-filter "openai responses integration"
          zig test src/integration_test.zig --test-filter "codex spark originator integration"
      - name: Run Model Sync Checker
        run: ./scripts/check-model-sync.sh
